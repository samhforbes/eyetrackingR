<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Make a dataset collapsing over a time-window — make_time_window_data • eyetrackingR</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Make a dataset collapsing over a time-window — make_time_window_data"><meta property="og:description" content="Collapse time across our entire window and return a dataframe ready for analyses"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">eyetrackingR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/divergence_vignette.html">Estimating time windows of divergence</a>
    </li>
    <li>
      <a href="../articles/growth_curve_analysis_vignette.html">Performing a growth curve analysis using eyetrackingR</a>
    </li>
    <li>
      <a href="../articles/onset_contingent_analysis_vignette.html">Performing an onset-contingent analysis using eyetrackingR</a>
    </li>
    <li>
      <a href="../articles/preparing_your_data_vignette.html">Preparing your data for use with eyetrackingR</a>
    </li>
    <li>
      <a href="../articles/window_analysis_vignette.html">Performing a window analysis using eyetrackingR</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/samhforbes/eyetrackingR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Make a dataset collapsing over a time-window</h1>
    <small class="dont-index">Source: <a href="https://github.com/samhforbes/eyetrackingR/blob/HEAD/R/time_window_data.R" class="external-link"><code>R/time_window_data.R</code></a></small>
    <div class="hidden name"><code>make_time_window_data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Collapse time across our entire window and return a dataframe ready for analyses</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">make_time_window_data</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  aois <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  predictor_columns <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  other_dv_columns <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  summarize_by <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>The output of <code>make_eyetrackingr_data</code></p></dd>


<dt id="arg-aois">aois<a class="anchor" aria-label="anchor" href="#arg-aois"></a></dt>
<dd><p>Which AOI(s) is/are of interest? Defaults to all specified in
<code>make_eyetracking_r_data</code></p></dd>


<dt id="arg-predictor-columns">predictor_columns<a class="anchor" aria-label="anchor" href="#arg-predictor-columns"></a></dt>
<dd><p>Which columns indicate predictor vars, and therefore should be preserved in
grouping operations?</p></dd>


<dt id="arg-other-dv-columns">other_dv_columns<a class="anchor" aria-label="anchor" href="#arg-other-dv-columns"></a></dt>
<dd><p>Within each participant/trial (or whatever is specified in <code>summarize_by</code>),
this function will calculate not only proportion-looking, but also the mean of any columns specified here.</p></dd>


<dt id="arg-summarize-by">summarize_by<a class="anchor" aria-label="anchor" href="#arg-summarize-by"></a></dt>
<dd><p>Should the data be summarized along, e.g., participants, items, etc.? If so, give
column names here. If left blank, will leave trials distinct. The former is needed for more traditional
analyses (<code>t.test</code>, <code>ANOVA</code>), while the latter is preferable for mixed-effects models (<code>lmer</code>)</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>Data with proportion-looking and transformations (logit, arc-sin, etc.)</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Aside from proportion looking (<code>Prop</code>), this function returns several columns useful for subsequent
analysis:</p>
<ul><li><p><code>LogitAdjusted</code> - The logit is defined as <code>log( Prop / (1 - Prop) )</code>. This
 transformation attempts to map bounded <code>0,1</code> data to the real number line. Unfortunately,
 for data that is exactly 0 or 1, this is undefined. One solution is add a very small value to
 any datapoints that equal 0, and subtract a small value to any datapoints that equal 1 (we use
 1/2 the smallest nonzero value for this adjustment).</p></li>
<li><p><code>Elog</code> - Another way of calculating a corrected logit transformation is to
add a small value <code>epsilon</code> to both the numerator and denominator of the logit equation (we
use 0.5).</p></li>
<li><p><code>Weights</code> - These attempt to further correct the Elog transformation, since the
 variance of the logit depends on the mean. They can be used in a mixed effects model by setting
 the <code>weights=Weights</code> in <code>lmer</code> (note that this is the reciprocal of the
weights calculated in Mirman's walkthrough, so you do *not* set <code>weights = 1/Weights</code> as done there.)</p></li>
<li><p><code>ArcSin</code> - The arcsine-root transformation of the raw proportions, defined as
<code>asin(sqrt(Prop))</code></p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">word_recognition</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="make_eyetrackingr_data.html">make_eyetrackingr_data</a></span><span class="op">(</span><span class="va">word_recognition</span>,</span></span>
<span class="r-in"><span>                               participant_column <span class="op">=</span> <span class="st">"ParticipantName"</span>,</span></span>
<span class="r-in"><span>                               trial_column <span class="op">=</span> <span class="st">"Trial"</span>,</span></span>
<span class="r-in"><span>                               time_column <span class="op">=</span> <span class="st">"TimeFromTrialOnset"</span>,</span></span>
<span class="r-in"><span>                               trackloss_column <span class="op">=</span> <span class="st">"TrackLoss"</span>,</span></span>
<span class="r-in"><span>                               aoi_columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Animate'</span>,<span class="st">'Inanimate'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                               treat_non_aoi_looks_as_missing <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># generate a dataset summarizing an AOI (Animate) by ParticipantName</span></span></span>
<span class="r-in"><span><span class="va">response_window_agg_by_sub</span> <span class="op">&lt;-</span> <span class="fu">make_time_window_data</span><span class="op">(</span><span class="va">data</span>,</span></span>
<span class="r-in"><span>                                                    aois<span class="op">=</span><span class="st">'Animate'</span>,</span></span>
<span class="r-in"><span>                                                    summarize_by <span class="op">=</span> <span class="st">"ParticipantName"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># optionally included additional columns for use as predictors</span></span></span>
<span class="r-in"><span><span class="co"># in later statistical models</span></span></span>
<span class="r-in"><span><span class="va">response_window_agg_by_sub</span> <span class="op">&lt;-</span> <span class="fu">make_time_window_data</span><span class="op">(</span><span class="va">data</span>,</span></span>
<span class="r-in"><span>                                                    aois<span class="op">=</span><span class="st">'Animate'</span>,</span></span>
<span class="r-in"><span>                                                    predictor_columns<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Age'</span>,<span class="st">'MCDI_Total'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                    summarize_by <span class="op">=</span> <span class="st">"ParticipantName"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot the aggregated data for sanity check</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">response_window_agg_by_sub</span>, predictor_columns<span class="op">=</span><span class="st">"Age"</span>, dv <span class="op">=</span> <span class="st">"LogitAdjusted"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Samuel Forbes, Jacob Dink, Brock Ferguson.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

